<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>세나 리버스 쿠폰 자동 입력기 by 샤피네</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
    
    body { 
        font-family: 'Noto Sans KR', sans-serif;
        background-image: url('images/seven3.png'); 
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: #e0e0e0; 
        margin: 0; 
        padding: 20px; 
        display: flex; 
        justify-content: center; 
        align-items: center; 
        min-height: 100vh; 
        box-sizing: border-box; 
    }


/* 와인 & 퍼플 테마 CSS */
.container { 
    background: rgba(49, 27, 146, 0.75); /* 깊은 보라색 */
    backdrop-filter: blur(10px); 
    border-radius: 20px; 
    padding: 35px; 
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6); 
    border: 1px solid rgba(126, 87, 194, 0.5); /* 연한 보라색 테두리 */
}

h1 { 
    color: #d1c4e9; /* 부드러운 라벤더색 제목 */
    text-align: center; 
    margin-bottom: 5px; 
    font-weight: 700; 
}
    p { text-align: center; margin-bottom: 30px; color: #a0aec0; }
    .input-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 10px; font-weight: 700; }
    input[type="text"] { width: 100%; padding: 15px; background-color: rgba(26, 26, 46, 0.7); border: 1px solid rgba(31, 64, 104, 0.6); border-radius: 10px; color: #e0e0e0; font-size: 16px; box-sizing: border-box; transition: border-color 0.3s ease; }
    input[type="text"]:focus { outline: none; border-color: #63d4ff; }
    .main-btn { width: 100%; padding: 15px; background: linear-gradient(45deg, #13E2DA, #1E90FF); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: 700; cursor: pointer; transition: all 0.3s ease; }
    .main-btn:disabled { background: #555; cursor: not-allowed; opacity: 0.6; }
    .log-container { margin-top: 25px; background-color: rgba(26, 26, 46, 0.7); border-radius: 8px; padding: 15px; min-height: 150px; white-space: pre-wrap; word-wrap: break-word; font-family: monospace; color: #b3c5ef; border: 1px solid rgba(31, 64, 104, 0.6); }

    /* --- 이 부분 추가 --- */
    .creator-credit {
        display: block;
        text-align: right;
        font-size: 12px;
        color: rgba(255, 255, 255, 0.4);
        margin-top: 8px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>세나 리버스 쿠폰 자동 입력기</h1>
    <p>UID를 입력하고 버튼을 누르면 사용 가능한 모든 쿠폰이 자동으로 등록됩니다.</p>
    
    <div class="input-group">
        <label for="uid">회원번호 (UID)</label>
        <input type="text" id="uid" placeholder="UID를 여기에 입력하세요">
        <span class="creator-credit">by 샤피네</span>
    </div>
    
    <button id="register-all-btn" class="main-btn" disabled>UID를 입력하세요</button>
    
    <div id="log-container" class="log-container">쿠폰 등록 결과가 표시됩니다..</div>
</div>

<script>
    // JavaScript 코드는 변경사항 없습니다.
    const uidInput = document.getElementById('uid');
    const registerBtn = document.getElementById('register-all-btn');
    const logContainer = document.getElementById('log-container');

    uidInput.addEventListener('input', () => {
        const uid = uidInput.value.trim();
        if (uid) {
            registerBtn.disabled = false;
            registerBtn.textContent = '전체 쿠폰 등록하기';
        } else {
            registerBtn.disabled = true;
            registerBtn.textContent = 'UID를 입력하세요';
        }
    });

    registerBtn.addEventListener('click', async () => {
        const uid = uidInput.value.trim();
        if (!uid) return;

        registerBtn.disabled = true;
        registerBtn.textContent = '등록 진행 중...';
        logContainer.textContent = '최신 쿠폰 목록을 불러와 등록을 시작합니다...';

try {
    const response = await fetch('/api/registerAllCoupons.py', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ uid })
    });

    const result = await response.json();

            if (response.ok) {
                logContainer.textContent = result.log;
            } else {
                logContainer.textContent = `오류 발생: ${result.message || '알 수 없는 서버 오류'}`;
            }

        } catch (error) {
            logContainer.textContent = `치명적인 오류 발생: ${error.message}`;
        } finally {
            registerBtn.disabled = false;
            registerBtn.textContent = '전체 쿠폰 등록하기';
            uidInput.dispatchEvent(new Event('input'));
        }
    });
</script>

</body>
</html>